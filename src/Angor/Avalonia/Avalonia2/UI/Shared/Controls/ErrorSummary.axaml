<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="https://github.com/projektanker/icons.avalonia"
        xmlns:generic="clr-namespace:System.Collections.Generic;assembly=System.Collections"
        xmlns:controls="clr-namespace:Avalonia2.UI.Shared.Controls">
    <Design.PreviewWith>
        <StackPanel Width="400" Height="400">
            <controls:ErrorSummary HorizontalAlignment="Center">
                <controls:ErrorSummary.Errors>
                    <generic:List x:TypeArguments="x:String">
                        <x:String>Error 1</x:String>
                        <x:String>Error 2</x:String>
                        <x:String>Error 3</x:String>
                    </generic:List>
                </controls:ErrorSummary.Errors>
            </controls:ErrorSummary>
            <controls:ErrorSummary HorizontalAlignment="Center" />
        </StackPanel>
    </Design.PreviewWith>

    <Styles.Resources>
        <ControlTheme TargetType="controls:ErrorSummary" x:Key="{x:Type controls:ErrorSummary}">
            <Setter Property="HorizontalAlignment" Value="Right" />
            <Setter Property="Template">
                <ControlTemplate>
                    <Panel DataContext="{Binding $parent[controls:ErrorSummary]}">
                        <controls:IconButton IsVisible="{Binding !!$parent[controls:ErrorSummary].Errors.Count}"
                                Foreground="{DynamicResource SystemChromeWhiteColor}"
                                Content="{Binding $parent[controls:ErrorSummary].Errors.Count, StringFormat='{}{0} error(s) found'}" HorizontalAlignment="Left" Padding="10 5"
                                Theme="{StaticResource ThinTransparentButton}">
                            <controls:IconButton.Background>
                                <SolidColorBrush Color="{StaticResource ErrorColor}" Opacity="0.7" />
                            </controls:IconButton.Background>
                            <Button.Flyout>
                                <Flyout Placement="BottomEdgeAlignedLeft">
                                    <!-- Replaced Zafiro BulletList with ItemsControl + bullet DataTemplate -->
                                    <ItemsControl ItemsSource="{Binding $parent[controls:ErrorSummary].Errors}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <DockPanel>
                                                    <TextBlock xml:space="preserve" VerticalAlignment="Top"> &#x2022; </TextBlock>
                                                    <ContentControl Content="{Binding}" />
                                                </DockPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </Flyout>
                            </Button.Flyout>
                        </controls:IconButton>
                        <ContentControl Foreground="{DynamicResource SuccessColor}" IsVisible="{Binding !!!$parent[controls:ErrorSummary].Errors.Count}">
                            <i:Icon Value="fa-solid fa-check" />
                        </ContentControl>
                    </Panel>
                </ControlTemplate>
            </Setter>
        </ControlTheme>
    </Styles.Resources>
</Styles>
